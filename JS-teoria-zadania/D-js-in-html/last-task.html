<!--
    1. Utwórz tutaj podstawową strukturę HTML
    2. Dodaj za pomocą "document.createElement" nowy "button"
    3. Button ma mieć .innerText = "0"
    4. Osadź go na stronie za pomocą document.body.append(buttonRef)
    5. Dodaj event "click" na tym buttonie za pomocą ".addEventListener" (sprawdź d103)
    6. Za każdym razem jak ktoś kliknie zwiększaj `innerText` o jeden

    bussines:
    [1] -> [2] -> [3] -> [4]
-->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        button {
            font-size: 42px;
            padding: 20px;
            cursor: pointer;
            margin-left: 120px;
        }
    </style>
</head>

<body>

    <!-- <script>
        const btn = document.createElement("button");

        let x = 23
        updateState(x);

        btn.addEventListener("click", () => {
            // console.log('!!!')
            x++;
            updateState(x);
        })

        function updateState(x) {
            btn.innerText = String(x);
        }

        document.body.append(btn)
    </script> -->

    <script>
        const BTN_COUNTER_KEY = 'btn.counter';
        
        function BtnComponent(counter = 0, saveState = false) {
            const btn = document.createElement("button");
            const updateState = (s) => {
                btn.innerText = String(s);
                if (saveState) {
                    localStorage.setItem(BTN_COUNTER_KEY, s)
                }
            }

            const initialCount = localStorage.getItem(BTN_COUNTER_KEY);
            if (initialCount && saveState) {
                counter = Number(initialCount);
            }

            updateState(counter);
            btn.addEventListener("click", () => {
                counter++;
                updateState(counter);
            })


            // function updateState(x) {
            //     btn.innerText = String(x);
            // }
            return btn
        }

        document.body.append(BtnComponent(10, true), BtnComponent(90, true), BtnComponent(100))
    </script>
</body>

</html>